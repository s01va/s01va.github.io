---
layout: single
title: "Node.js로 개발 중 주요 사용 커맨드 목록"
description: ""
date: 2021-11-24 12:00:00 -0400
# modified: 
tags: 
- node.js
- troubleshooting
comments:
 true
share: true
toc_sticky: true
---



다음 상황들을 전제합니다.

개인적으로 node.js를 사용하여 웹 생성 시 루틴화된 과정을 정리하였습니다.

다음 상황들을 전제합니다.

- node, npm이 설치되어 있음
- express, mysql, sequelize를 사용

-----------------



## Express 설정

1. express, express-generator global 설치

   ```bash
   npm install express -g
   npm install express-generator -g
   ```

2. express 프로젝트 생성

   ```bash
   express [project name]
   cd [project name]
   ```

   디렉토리가 생성되며, 내부에 node.js web을 위한 필수 코드가 자동 생성됨

3. npm init

   ```bash
   npm init
   ```

   부가적인 과정

   version, author, entry point, git repository 등을 지정

4. 의존성 설치

   ```bash
   npm install
   ```

   

----------------

## DB/ORM 설정

node.js 프로젝트의 루트 디렉토리에 있다고 가정

1. sequelize/mysql 설치

   ```bash
   npm install sequelize -g
   npm install sequelize-cli -g
   npm install mysql2 -g
   ```

2. sequelize 초기화

   ```bash
   sequelize init
   ```

   db, 모델 관련 디렉토리 및 파일들이 생성된다.

3. 설정파일 작성

   sequelize 초기화를 하면 config라는 폴더 아래에 config.json 파일이 생성된다.

   - 자동생성된 기본 설정파일

     ```json
     //config.json
     {
       "development": {
         "username": "root",
         "password": null,
         "database": "database_development",
         "host": "127.0.0.1",
         "dialect": "mysql"
       },
       "test": {
         "username": "root",
         "password": null,
         "database": "database_test",
         "host": "127.0.0.1",
         "dialect": "mysql"
       },
       "production": {
         "username": "root",
         "password": null,
         "database": "database_production",
         "host": "127.0.0.1",
         "dialect": "mysql"
       }
     }
     ```

   민감정보를 환경변수로 불러오기 위해, 변수 관리가 되지 않는 json파일을 javascript로 변경한다.

   - dotenv 설치

     ```bash
     npm install dotenv
     ```

   - javascript로 변경한 설정파일

     ```javascript
     //config.js
     require('dotenv').config()
     
     const development = {
         username: "root",
         password: process.env.[환경변수명],
         database: "database_development",
         host: process.env.[환경변수명],
         dialect: "mysql"
     };
     
     const production = {
         username: "root",
         password: process.env.[환경변수명],
         database: "database_production",
         host: process.env.[환경변수명],
         dialect: "mysql"
     };
     
     const test = {
         username: "root",
         password: process.env.[환경변수명],
         database: "database_test",
         host: process.env.[환경변수명],
         dialect: "mysql"
     };
     
     module.exports = {development, production, test};
     ```
     
     위와 같이 환경변수 등을 활용할 수 있다.
     
   - DB config파일 선언부 수정

     ```javascript
     // config/index.js
     // 원본
     const config = require(__dirname + '/../config/config.json')[env];
     // 변경후
     const config = require(__dirname + '/../config/config.js')[env];
     ```

4. model 생성

   다음과 같은 명령어를 만들어 실행시킨다.

   ```bash
   sequelize model:generate --force --name [모델명] --attributes [column1]:[type], [column2]:[type], [column3]:[type]
   #sequelize model:generate --force --name mcusers --attributes userid:string, name:string, email:string, password:string
   ```

5. 작성한 모델을 바탕으로 DB에 table 생성

   ```bash
   sequelize db:migrate
   ```

   명령어 실행 후 해당 DB에 테이블이 생성된 것을 확인할 수 있다.

   실행 취소도 가능하다.

   ```bash
   sequelize db:migrate:undo
   ```

   